---
title: "Lab-02-Dodson"
author: "Kenaniah Dodson"
date: "2025-04-06"
output: 
  github_document:
    toc: true
    toc_depth: 3
    preserve_yaml: true
  rmdformats::downcute:
    toc_depth: 3
    self_contained: true
    thumbnails: false
    lightbox: true
    gallery: false
    highlight: "tango"
    code_folding: show
always_allow_html: true
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding,
  output_format = "all") })
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Library

```{r, warning=FALSE, message=FALSE, results='hide'}
# Load packages
library(here)        # relative filepaths for reproducibility
library(tidyverse)   # data wrangling
library(stringi)     # string wrangling
library(kableExtra)  # table formatting
library(tidycensus)  # census data
```

# API Key and Variable Import

```{r, warning=FALSE, message=FALSE, results='hide'}
# Load API key, assign to TidyCensus Package
source(here::here("analysis/password.R"))
census_api_key(census_api_key)

```

```{r, warning=FALSE, message=FALSE, results='hide'}
import::here( "author",
              "census_division",
              "fips_region_assignment",
              "rank_variables",
              "svi_theme_variables",
              "svi_theme_flags",
             # notice the use of here::here() that points to the .R file
             # where all these R objects are created
             .from = here::here("analysis/project_data_steps_dodson.R"),
             .character_only = TRUE)
```

# Data

```{r, warning=FALSE, message=FALSE, results='hide'}
# Load SVI data sets
svi_2010 <- readRDS(here::here("data/raw/Census_Data_SVI/svi_2010_trt10.rds"))
svi_2020 <- readRDS(here::here("data/raw/Census_Data_SVI/svi_2020_trt10.rds"))
```

```{r, warning=FALSE, message=FALSE, results='hide'}
svi_2010 %>% colnames()
```

```{r, warning=FALSE, message=FALSE, results='hide'}
svi_2010 %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r, warning=FALSE, message=FALSE, results='hide'}
svi_2010 %>% nrow()
```

```{r, warning=FALSE, message=FALSE, results='hide'}
svi_2020 %>% colnames()
```

```{r, warning=FALSE, message=FALSE, results='hide'}
svi_2020 %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r, warning=FALSE, message=FALSE, results='hide'}
svi_2020 %>% nrow()
```

# Data Wrangling



```{r}
svi_2010 <- fips_region_assignment(svi_2010)

svi_2010 %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

```{r}
svi_2020 <- fips_region_assignment(svi_2020)

svi_2020 %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
# National
svi_2010_national <- rank_variables(svi_2010)
svi_2010_national %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
# National
svi_2020_national <- rank_variables(svi_2020)
svi_2020_national %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
# Regional
svi_2010_regional <- rank_variables(svi_2010, rank_by = "regional", location = "South Region")
svi_2010_regional %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
# Regional
svi_2020_regional <- rank_variables(svi_2020, rank_by = "regional", location = "South Region")
svi_2020_regional %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
# Divisional
svi_2010_divisional <- rank_variables(svi_2010, rank_by = "divisional", location = "South Atlantic Division")
svi_2010_divisional %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
# Divisional
svi_2020_divisional <- rank_variables(svi_2020, rank_by = "divisional", location = "South Atlantic Division")
svi_2020_divisional %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
# State
svi_2010_state <- rank_variables(svi_2010, rank_by = "state", location = "NC")
svi_2010_state %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
# State
svi_2020_state <- rank_variables(svi_2020, rank_by = "state", location = "NC")
svi_2020_state %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
# County
svi_2010_county <- rank_variables(svi_2010, rank_by = "county", location = "Wake County", state_abbr = "NC")
svi_2010_county %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
# County
svi_2020_county <- rank_variables(svi_2020, rank_by = "county", location = "Wake County", state = "NC")
svi_2020_county %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
svi_2020_national <- svi_theme_variables(svi_2020_national)
svi_2020_national %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
svi_2020_national <- svi_theme_flags(svi_2020_national, .90)
svi_2020_national %>% arrange(desc(F_TOTAL)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

```{r}
svi_2010_national <- svi_theme_variables(svi_2010_national)
svi_2010_national %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```


```{r}
svi_2010_national <- svi_theme_flags(svi_2010_national, .90)
svi_2010_national %>% arrange(desc(F_TOTAL)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```



***

# **Question 1**

#### Functions are most useful to increase reproducibility of works. If individuals users are required to rewrite functions before being able to use a data project, it will take much more time and decrease the reproducibility due to complexities, such as having to search for defining variables. Instead, by using functions that are reusable--especially in conjunction with our here::here functions--we are able to increase reproducibility thus making the works much more valuable.

#### In my initial class going over census data, functions would have been incredibly useful. I would have saved a lot of time in the data analysis section, and instead been able to use existing functions to reframe and explore the data.

# **Question 2**

#### The CDC SVI is the CDC's Social Vulnerability Index. This is a dataset that identifies areas that are more likely to experience adverse effects in case of emergency events that could occur. The areas are identified by key charactoristics, which are broadly put into 4 categories.

#### *Including--*

#### * **Socioeconomic Status**
#### * **Household Characteristics**
#### * **Racial and Ethnic Minority Status**
#### * **Housing Type and Transportation**

#### For our project, we intend to use this data to see which areas rank highly on the CDC SVI, broken into seperate area groupings.

#### *Including--*

#### * **County**
#### * **Division**
#### * **Region**
#### * **State**

# **Question 3**

## *Code Output:*

## **2020-2010 Most Vonlnerable Themes 1-4**
#### 2020 Most Vulnerable - Theme 1


```{r}

svi_2020_national %>% arrange(desc(F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Most Vulnerable - Theme 2

```{r}

svi_2020_national %>% arrange(desc(F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Most Vulnerable - Theme 3

```{r}

svi_2020_national %>% arrange(desc(F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Most Vulnerable - Theme 4

```{r}

svi_2020_national %>% arrange(desc(F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Most Vulnerable - Theme 1

```{r}

svi_2010_national %>% arrange(desc(F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```


#### 2010 Most Vulnerable - Theme 2

```{r}

svi_2010_national %>% arrange(desc(F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Most Vulnerable - Theme 3

```{r}

svi_2010_national %>% arrange(desc(F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Most Vulnerable - Theme 4

```{r}

svi_2010_national %>% arrange(desc(F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

## **2020-2010 Least Vulnerable Themes 1-4**
#### 2020 Least Vulnerable - Theme 1

```{r}

svi_2020_national %>% arrange((F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Least Vulnerable - Theme 2

```{r}

svi_2020_national %>% arrange((F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Least Vulnerable - Theme 3

```{r}

svi_2020_national %>% arrange((F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Least Vulnerable - Theme 4

```{r}

svi_2020_national %>% arrange((F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Least Vulnerable - Theme 1

```{r}

svi_2010_national %>% arrange((F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```


#### 2010 Least Vulnerable - Theme 2

```{r}

svi_2010_national %>% arrange((F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Least Vulnerable - Theme 3

```{r}

svi_2010_national %>% arrange((F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```


#### 2010 Least Vulnerable - Theme 4

```{r}

svi_2010_national %>% arrange((F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```


# **Question 4**

#### Load data

```{r}

svi_2010_divisional <- svi_theme_variables(svi_2010_divisional)
svi_2020_divisional <- svi_theme_variables(svi_2020_divisional)

svi_2010_divisional <- svi_theme_flags(svi_2010_divisional, .90)
svi_2020_divisional <- svi_theme_flags(svi_2020_divisional, .90)

```


## **2020-2010 Most Vulnerable Themes 1-4**
#### 2020 Most Vulnerable - Theme 1

```{r}

svi_2020_divisional %>% filter(division == census_division) %>%arrange(desc(F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```


#### 2020 Most Vulnerable - Theme 2

```{r}

svi_2020_divisional %>% filter(division == census_division) %>%arrange(desc(F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Most Vulnerable - Theme 3

```{r}

svi_2020_divisional %>% filter(division == census_division) %>%arrange(desc(F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Most Vulnerable - Theme 4

```{r}

svi_2020_divisional %>% filter(division == census_division) %>%arrange(desc(F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Most Vulnerable - Theme 1

```{r}

svi_2010_divisional %>% filter(division == census_division) %>%arrange(desc(F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Most Vulnerable - Theme 2

```{r}

svi_2010_divisional %>% filter(division == census_division) %>%arrange(desc(F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Most Vulnerable - Theme 3

```{r}

svi_2010_divisional %>% filter(division == census_division) %>%arrange(desc(F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```


#### 2010 Most Vulnerable - Theme 4

```{r}

svi_2010_divisional %>% filter(division == census_division) %>%arrange(desc(F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```


## **2020-2010 Least Vulnerable Themes 1-4**
#### 2020 Least Vulnerable - Theme 1

```{r}

svi_2020_divisional %>% filter(division == census_division) %>%arrange((F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Least Vulnerable - Theme 2

```{r}

svi_2020_divisional %>% filter(division == census_division) %>%arrange((F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```


#### 2020 Least Vulnerable - Theme 3

```{r}

svi_2020_divisional %>% filter(division == census_division) %>%arrange((F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Least Vulnerable - Theme 4

```{r}

svi_2020_divisional %>% filter(division == census_division) %>%arrange((F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Least Vulnerable - Theme 1

```{r}

svi_2010_divisional %>% filter(division == census_division) %>%arrange((F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Least Vulnerable - Theme 2

```{r}

svi_2010_divisional %>% filter(division == census_division) %>%arrange((F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Least Vulnerable - Theme 3

```{r}

svi_2010_divisional %>% filter(division == census_division) %>%arrange((F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Least Vulnerable - Theme 4

```{r}

svi_2010_divisional %>% filter(division == census_division) %>%arrange((F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### The most vulnerable by themes 1-4 in 2020 were:

#### * Florida
#### * FLorida
#### * Deleware
#### * District of Columbia *DC*

#### The same is true for 2010 and in the same order. Notably, Deleware and DC ranked higher in themes 1 and 2 than in 2020, though Florida was still leading

#### The least vulnerable by themes 1-4 in 2020 and 2010 were all Deleware. This is due to Kent County, which showed to be the least vulnerable in each theme.

# **Question 5**

#### Load Data

```{r}

svi_2010_state <- rank_variables(svi_2010, rank_by = "state", location = "FL")

svi_2020_state <- rank_variables(svi_2020, rank_by = "state", location = "FL")

```

```{r}

svi_2010_state <- svi_theme_variables(svi_2010_state)
svi_2020_state <- svi_theme_variables(svi_2020_state)

svi_2010_state <- svi_theme_flags(svi_2010_state, .90)
svi_2020_state <- svi_theme_flags(svi_2020_state, .90)

```

## **2020-2010 Most Vulnerable Themes 1-4**
#### 2020 Most Vulnerable - Theme 1

```{r}
svi_2020_state %>% arrange(desc(F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

#### 2020 Most Vulnerable - Theme 2

```{r}
svi_2020_state %>% arrange(desc(F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")
```

#### 2020 Most Vulnerable - Theme 3

```{r}
svi_2020_state %>% arrange(desc(F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Most Vulnerable - Theme 4

```{r}
svi_2020_state %>% arrange(desc(F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Most Vulnerable - Theme 1

```{r}
svi_2010_state %>% arrange(desc(F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Most Vulnerable - Theme 2

```{r}

svi_2010_state %>% arrange(desc(F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")


```

#### 2010 Most Vulnerable - Theme 3

```{r}
svi_2010_state %>% arrange(desc(F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Most Vulnerable - Theme 4

```{r}
svi_2010_state %>% arrange(desc(F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

## **2020-2010 Least Vulnerable Themes 1-4**
#### 2020 Least Vulnerable - Theme 1

```{r}
svi_2020_state %>% arrange((F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Least Vulnerable - Theme 2

```{r}
svi_2020_state %>% arrange((F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Least Vulnerable - Theme 3

```{r}
svi_2020_state %>% arrange((F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2020 Least Vulnerable - Theme 4

```{r}
svi_2020_state %>% arrange((F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Least Vulnerable - Theme 1

```{r}
svi_2010_state %>% arrange((F_THEME1)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Least Vulnerable - Theme 2

```{r}
svi_2010_state %>% arrange((F_THEME2)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Least Vulnerable - Theme 3

```{r}
svi_2010_state %>% arrange((F_THEME3)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### 2010 Least Vulnerable - Theme 4

```{r}
svi_2010_state %>% arrange((F_THEME4)) %>% head() %>% kbl() %>% kable_styling() %>% scroll_box(width = "100%")

```

#### The most vulnerable by themes 1-4 in 2020 were:

#### * Broward County
#### * Miami-Dade County
#### * Alachua County
#### * Hillsborough County

#### The most vulnerable by themes 1-4 in 2010 were:

#### * Broward County
#### * Hillsborough County
#### * Alachua County
#### * Miami-Dade County

#### The least vulnerable in 2020 and 2010 were all Alachua County, for all four themes












